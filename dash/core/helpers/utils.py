import csv
import io

def dictfetchall(cursor):
    ''' Retorna registros do cursor como uma lista de dicionarios '''

    columns = [col[0] for col in cursor.description]

    return [
        dict(zip(columns, row))
        for row in cursor.fetchall()
    ]

def decode_file_csv(file):
    ''' Retorna registros do arquivo csv como uma lista '''

    decoded_file = file.read().decode('utf-8')
    io_string = io.StringIO(decoded_file)
    data = csv.reader(io_string, delimiter=',')
    next(data) #Avança uma linha, fazendo com que o cabeçalho não apareça
    
    return data

